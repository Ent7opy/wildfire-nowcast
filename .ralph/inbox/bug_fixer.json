{
  "goal_file": ".ralph/GOAL.md",
  "goal_summary": "Improve wildfire detection quality by replacing naive FIRMS confidence filtering with a composite Fire Likelihood Score that combines FIRMS confidence (weak prior), persistence filtering, land-cover plausibility, weather plausibility, and industrial false-source masking. Fix UI bugs (tooltip, details panel, coordinate extraction) and update UI to reflect new likelihood semantics.",
  "task": null,
  "requested_changes": [
    {
      "severity": "must",
      "title": "Integration tests fail due to missing database migrations",
      "evidence": "api/tests/test_fire_likelihood_integration.py::test_composite_likelihood_pipeline - Failed with: psycopg2.errors.UndefinedColumn: column \"false_source_masked\" of relation \"fire_detections\" does not exist",
      "suggested_fix": "The test database needs to have migrations applied before running integration tests. Run 'make migrate' or document that integration tests require a migrated database with the new schema columns (persistence_score, landcover_score, weather_score, false_source_masked, fire_likelihood). Consider adding a pytest fixture or CI step that ensures migrations are applied before running integration tests, or mark these tests to skip if schema is not migrated."
    }
  ],
  "instruction": "Implement ONLY the requested changes. Do not expand scope. Do not commit.",
  "outbox_schema": {
    "task_id": "T01",
    "status": "fixed|blocked",
    "applied_changes": [
      "..."
    ],
    "files_changed": [
      "..."
    ],
    "verification": [
      "Ran: ...",
      "Would run: ..."
    ],
    "blockers": [
      "if blocked..."
    ]
  }
}
